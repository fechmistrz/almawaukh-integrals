\documentclass[9pt, twoside, a5paper, fleqn]{extbook}
\usepackage[
	margin=10mm,
    headsep=5mm,
	twoside,
    includehead,
    % showframe,
]{geometry}

\usepackage{fancyhdr}
\fancypagestyle{plain}{
    \fancyhf{}
    \fancyfoot[C]{}
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\footrulewidth}{0pt}
}
\pagestyle{fancy}
\fancyhead{}
\fancyfoot{}
% 341      Rozdział 7. Kalifat algebry | 7.2 Pierścień adeli              342 |
\fancyhead[LE]{\thepage}
\fancyhead[RE]{\nouppercase{\leftmark}}
\fancyhead[LO]{\nouppercase{\rightmark}}
\fancyhead[RO]{\thepage}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.0pt}

\usepackage{parskip}
\usepackage{multicol}
\usepackage{float} % [H] for figure environment
\usepackage{hyperref} % for \url and \href

\usepackage{polski}
\usepackage[T1]{fontenc}

\usepackage{xcolor}

\usepackage{amsmath, amsfonts, amssymb, amsthm}
\DeclareMathOperator{\arsinh}{arsinh}
\newcommand{\N}{{\mathbb N}}
\newcommand{\R}{{\mathbb R}}

\newcounter{counter}
% \numberwithin{counter}{chapter}
\newtheorem{proposition}[counter]{Fakt}
\newtheorem{problemaux}[counter]{Problem}
\newtheorem{theoreme}[counter]{Twierdzenie}
\newtheorem{exercise}{Exercise}[chapter]

\RequirePackage[framemethod=default]{mdframed} % Required for creating colored boxes used for theorems, definitions, exercises and corollaries

% Theorem box
\newmdenv[
	skipabove=5pt, % Whitespace above box
	skipbelow=1pt, % Whitespace below box
	backgroundcolor=white, % Background color
	linecolor=black, % Border color
    linewidth=0.5pt,
	innerleftmargin=5pt, % Inside left margin width
	innerrightmargin=5pt, % Inside right margin width
	innertopmargin=0pt, % Inside top margin height
	innerbottommargin=5pt, % Inside bottom margin height
	leftmargin=0cm, % Outside left margin width
	rightmargin=0cm % Outside right margin width
]{integralBox}

\newmdenv[
	skipabove=5pt, % Whitespace above box
	skipbelow=1pt, % Whitespace below box
	backgroundcolor=blue!15, % Background color
	linecolor=black, % Border color
    linewidth=1pt,
	innerleftmargin=5pt, % Inside left margin width
	innerrightmargin=5pt, % Inside right margin width
	innertopmargin=0pt, % Inside top margin height
	innerbottommargin=5pt, % Inside bottom margin height
	leftmargin=0cm, % Outside left margin width
	rightmargin=0cm % Outside right margin width
]{integral_nosolution_Box}
% \newenvironment{problem}{\begin{integralBox}\begin{problemaux}}{\end{problemaux}\end{integralBox}}
\newenvironment{problem}{\begin{problemaux}}{\end{problemaux}}
\newenvironment{problem_nosolution}{\begin{integral_nosolution_Box}\begin{problemaux}}{\end{problemaux}\end{integral_nosolution_Box}}

\theoremstyle{remark}
\newtheorem*{solution}{Rozwiązanie}

\author{Imię Nazwisko}
\title{Tytuł książki}

\usepackage{imakeidx}
\usepackage{makeidx}
\usepackage{etoolbox} % for patchcmd
\patchcmd{\theindex}{\MakeUppercase\indexname}{\sffamily\normalsize\bfseries\indexname}{}{}
\makeindex[title=Skorowidz]
\makeindex[name=persons,title=Indeks osób]

\usepackage{Alegreya}

\begin{document}
\input{00_intro/head_1}
\input{00_intro/head_2}
\input{00_intro/head_3}
\input{00_intro/head_4}
\input{00_intro/head_5}

\raggedbottom

\chapter{Pochodne}
\input{sections/01_derivatives}

\chapter{Całki}
\input{sections/by_derivatives}
\input{sections/makefile-problems/by_substitution}
\input{sections/by_parts}
\input{sections/rational}
\input{sections/differential_binomial}
% \section{Całkowanie funkcji trygonometrycznych}
% Całkowanie funkcji trygonometrycznych
	\input{sections/makefile-problems/feynman_trick}

\section{Zadania z turniejów całkowania}
	\input{sections/makefile-problems/bee_mit}

\input{sections/makefile-problems/theoretic}

\section{Trudne całki}
	\input{sections/makefile-problems/hard}
	\input{sections/makefile-problems/hard_valean}
	\input{sections/makefile-problems/hard_stackexchange}

\chapter{Rozwiązania}
% \input{sections/by_derivatives}
\input{sections/makefile-solutions/by_substitution}
% \input{sections/by_parts}
% \input{sections/rational}
% \input{sections/differential_binomial}
% \section{Całkowanie funkcji trygonometrycznych}
% Całkowanie funkcji trygonometrycznych
\input{sections/makefile-solutions/feynman_trick}

\section{Zadania z turniejów całkowania}
	\input{sections/makefile-solutions/bee_mit}

\input{sections/makefile-solutions/theoretic}

\section{Trudne całki}
	\input{sections/makefile-solutions/hard}
	\input{sections/makefile-solutions/hard_valean}
	\input{sections/makefile-solutions/hard_stackexchange}


\chapter{Tłumaczenie numeracji}
\input{sections/banas_wedrychowicz}

\indexprologue{\small Tekst prologu I.}
\printindex

\indexprologue{\small Tekst prologu II.}
\printindex[persons]

\raggedright
\bibliography{integrals}{}
\bibliographystyle{plain}

\end{document}

% TODO: https://www.amazon.com/dp/0867202939
% TODO: $$\int_0^\infty \log(x) / (1+x^2) dx = 0$$ (Euler?)
% TODO: $$\int_0^\infty 1/(x^3 - 1) dx = -pi sqrt 3 / 9$$
% TODO: % The author of the 1944 paper that first published this gem was D. P. Dalzell, a Donald Percy Dalzell $$ \int x^4 (1-x)^4 / (1+x^2) = 22/7 - pi$$
% TODO: https://math.stackexchange.com/questions/tagged/integration?tab=votes&page=2&pagesize=15
